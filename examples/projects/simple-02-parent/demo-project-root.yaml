---
kind: Project
version: v1
metadata:
  name: project-root
  environments:
  - sandbox1
  - sandbox2
  dependencies:
    apply:
    - shell-script-v1-minimal   # This would typically be where additional manifests are obtained - perhaps from Git
    delete:
    - shell-script-v1-minimal   # This would typically be where additional manifests are obtained - perhaps from Git
spec:
  extensionPaths: []            # Additional third party extensions
  manifestFiles: []             # Additional path to YAML manifests to parse for work
  skipConfirmation: false       # If true, no confirmation on the execution plan will be asked for (Console).
---
kind: FileHandlerLogging
version: v1
metadata:
  name: FileHandler
spec:
  filename: /tmp/test.log
  level: !Value project-1-log-level
---
kind: StreamHandlerLogging
version: v1
metadata:
  name: StreamHandler
spec:
  level: !Value project-1-log-level
  # see https://docs.python.org/3/library/logging.html#logrecord-attributes
  loggingFormat: ' *** %(asctime)s %(levelname)s - %(filename)s:%(funcName)s:%(lineno)d - %(message)s'
---
kind: Values
version: v1
metadata:
  name: project-1-values
spec:
  values:
  - valueName: project-1-log-level
    defaultValue: trace
    environmentOverrides:
    - environmentName: sandbox1
      value: debug
    - environmentName: sandbox2
      value: info
---
kind: ShellScript
version: v1
metadata:
  name: shell-script-v1-minimal
  skipDeleteAll: true
  environments:
  - sandbox1
  - sandbox2
spec:
  source:
    type: inline
    value: !Sub
    - 'echo "Action: ${action} with logging level set to ${debugLevel}"'
    - action: !Variable std::action
      debugLevel: !Value project-1-log-level

