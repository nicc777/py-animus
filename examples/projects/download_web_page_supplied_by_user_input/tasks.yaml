---
kind: CliInputPrompt
version: v1
metadata:
  name: url
spec:
  promptText: 'Enter URL of file to download:'
  promptCharacter: 'URL > '
---
kind: CliInputPrompt
version: v1
metadata:
  name: save-target
  skipDeleteAll: true
spec:
  promptText: 'Enter the full path where the downloaded file must be saved, including the filename:'
  promptCharacter: 'Target Output File > '
---
kind: WebDownloadFile
version: v1
metadata:
  name: web-download
  dependencies:
    apply:
    - url
    - save-target
    delete:
    - save-target
spec:
  sourceUrl: !Variable 'CliInputPrompt:url:default:CLI_PROMPT'
  targetOutputFile: !Variable 'CliInputPrompt:save-target:default:CLI_PROMPT'
---
kind: WriteFile
version: v1
metadata:
  name: write-file-v1-minimal
  dependencies:
    apply:
    - web-download
spec:
  data: !Sub
  - '{"status": "${status}","downloadPath": "${path}"}'
  - status: !Variable 'CliInputPrompt:web-download:default:STATUS'
    path: !Value 'CliInputPrompt:save-target:default:CLI_PROMPT'
  targetFile: /tmp/results.json
